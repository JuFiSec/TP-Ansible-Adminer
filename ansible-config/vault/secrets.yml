# ====================================================================
# VAULT/SECRETS.YML - FICHIER DES SECRETS
# ====================================================================
# IMPORTANT : Ce fichier DOIT être chiffré avec Ansible Vault
#
# ⚠️  NE PAS COMMITER CE FICHIER EN CLAIR SUR GITHUB !
#
# APPROACH 2 : Secrets Vault + .env.example + PDF
# ─────────────────────────────────────────────────
# Ce fichier contient les secrets réels chiffrés avec Ansible Vault.
# Le fichier .env.example montre la structure (PUBLIC sur GitHub).
# Le prof peut reconstituer avec le PDF fourni en rapport.
#
# Pour chiffrer ce fichier :
#   ansible-vault encrypt vault/secrets.yml
#
# Pour le déchiffrer (édition) :
#   ansible-vault edit vault/secrets.yml
#
# Pour le voir en clair :
#   ansible-vault view vault/secrets.yml
#
# ====================================================================

---

# ====================================================================
# MYSQL 8.0 - ROOT CREDENTIALS
# ====================================================================

# Mot de passe root MySQL 8.0
# Utilisé par : 03-deploy-database.yml
# Permissions : Tous les droits sur toutes les bases
mysql_root_password: "RootPasswordMySQL8_0_Secure2025!"

# ====================================================================
# MYSQL - UTILISATEURS APPLICATION
# ====================================================================

# Utilisateur 'adminer_user' pour l'application Adminer
# Host : '%' (accessible depuis n'importe quel hôte du réseau)
# Permissions : ALL sur *.*  (tous les droits)
# Utilisé par : 02-deploy-adminer.yml & Adminer Web
mysql_adminer_user: "adminer_user"
mysql_adminer_password: "AdminerUserPassword_Secure2025!"

# Utilisateur application optionnel (pour future utilisation)
# Host : '%'
# Permissions : SELECT, INSERT, UPDATE, DELETE
mysql_app_user: "app_user"
mysql_app_password: "AppUserPassword_Secure2025!"

# ====================================================================
# ADMINER - CREDENTIALS INTERFACE WEB
# ====================================================================

# Utilisateur administrateur Adminer (web interface)
# Utilisé pour se logger dans Adminer via la web interface
# Note : Adminer n'a pas de système d'authentification par défaut
#        Cette variable est pour documentation/logs
adminer_admin_user: "adminer_admin"
adminer_admin_password: "AdminerAdminPassword_Secure2025!"

# ====================================================================
# ANSIBLE SSH / CREDENTIALS
# ====================================================================

# Utilisateur Ansible (créé dans tous les conteneurs)
# Utilisé pour l'authentification SSH des playbooks
ansible_ssh_user: "ansible"
ansible_ssh_key_path: "/root/.ssh/id_rsa"

# ====================================================================
# VAULT ENCRYPTION - METADATA
# ====================================================================

# Password pour déchiffrer ce fichier avec Ansible Vault
# À mettre dans : .vault-password (LOCAL, .gitignored)
# À communiquer au prof dans le PDF de rapport
vault_password: "SecureVaultPassword2025!"

# Cipher utilisé par Ansible Vault (défaut : AES256)
vault_cipher: "AES256"

# ====================================================================
# BASES DE DONNÉES - CONFIGURATION
# ====================================================================

# Configurations des bases de données
# (Les variables principales sont dans group_vars/db_servers.yml)

# Bases à créer automatiquement
databases:
  - name: "testdb"
    charset: "utf8mb4"
    collation: "utf8mb4_unicode_ci"
  - name: "adminer_db"
    charset: "utf8mb4"
    collation: "utf8mb4_unicode_ci"

# ====================================================================
# TOKENS & CLÉS API (FUTURE UTILISATION)
# ====================================================================

# Réservé pour future utilisation (si services externes)
# api_token: "xxx"
# auth_key: "yyy"

# ====================================================================
# NOTES DE SÉCURITÉ & DOCUMENTATION
# ====================================================================
#
# UTILISATION DES SECRETS
# ───────────────────────
# Les passwords définis ci-dessus sont utilisés par Ansible pour :
#
# 1. mysql_root_password
#    → Configuré comme mot de passe root MySQL
#    → Utilisé dans 03-deploy-database.yml
#    → Nécessaire pour les opérations d'administration MySQL
#
# 2. mysql_adminer_password
#    → Crée l'utilisateur 'adminer_user'@'%'
#    → Utilisé par Adminer web pour se connecter à MySQL
#    → Utilisé dans 03-deploy-database.yml
#
# 3. adminer_admin_password
#    → Utilisé pour les logs Ansible
#    → Documentation uniquement (Adminer n'a pas d'auth interne)
#
# 4. vault_password
#    → Password pour déchiffrer ce fichier
#    → À stocker dans .vault-password (LOCAL)
#    → À communiquer au prof de manière SÉCURISÉE (PDF/email)
#
# ====================================================================
#
# APPROACH 2 - GESTION DES SECRETS
# ────────────────────────────────
#
# Fichiers concernés :
#
# ✅ vault/secrets.yml (CE FICHIER)
#    └─ Chiffré avec ansible-vault encrypt
#    └─ Contient les secrets réels
#    └─ À commiter sur GitHub (chiffré)
#
# ✅ .env.example (PUBLIC)
#    └─ Template des secrets (sans valeurs réelles)
#    └─ À commiter sur GitHub (PUBLIC, sans danger)
#    └─ Permet au prof de comprendre la structure
#
# ✅ .env (LOCAL, .gitignored)
#    └─ Copie de .env.example avec valeurs réelles
#    └─ À NE PAS commiter sur GitHub
#    └─ Pour utilisation locale
#
# ✅ .vault-password (LOCAL, .gitignored)
#    └─ Password pour déchiffrer vault/secrets.yml
#    └─ À NE PAS commiter sur GitHub
#    └─ À communiquer au prof de manière SÉCURISÉE
#
# ✅ RAPPORT PDF (LOCAL, REMIS AU PROF)
#    └─ Document expliquant comment reconstituer les secrets
#    └─ Contient .vault-password et .env.example
#    └─ Permet au prof de relancer le projet
#
# ====================================================================
#
# RECONSTITUTION DES SECRETS (Pour le prof)
# ───────────────────────────────────────────
#
# 1. Récupérer le fichier PDF du rapport
# 2. Extraire .vault-password du PDF
# 3. Créer le fichier .vault-password localement
# 4. Placer vault/secrets.yml (depuis GitHub) dans le projet
# 5. Lancer : ansible-vault decrypt vault/secrets.yml
#    (Ansible utilisera .vault-password automatiquement)
# 6. Les secrets seront déchiffrés et utilisables
# 7. Pour sécurité, re-chiffrer après utilisation :
#    ansible-vault encrypt vault/secrets.yml
#
# ====================================================================
#
# EN PRODUCTION (Recommandations)
# ────────────────────────────────
#
# ✓ Utiliser un gestionnaire de secrets centralisé (HashiCorp Vault, AWS Secrets Manager)
# ✓ Générer des passwords forts et aléatoires
# ✓ Implémenter une rotation régulière des passwords
# ✓ Activer l'authentification multi-facteur (MFA)
# ✓ Auditer tous les accès aux secrets
# ✓ Chiffrer les secrets en transit (HTTPS, SSH)
# ✓ Chiffrer les secrets au repos (encryption de base de données)
# ✓ Limiter l'accès aux fichiers de secrets (permissions fichiers)
# ✓ Utiliser des clés SSH forte (4096-bit RSA minimum)
# ✓ Nettoyer les logs contenant des secrets sensibles
#
# ====================================================================
