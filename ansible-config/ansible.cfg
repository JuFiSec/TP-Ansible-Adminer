# ====================================================================
# CONFIGURATION ANSIBLE
# ====================================================================
# Cette configuration définit le comportement global d'Ansible
# pour le déploiement d'Adminer sur Docker
# ====================================================================

[defaults]

# Inventaire : chemin du fichier inventory.ini
inventory = inventory.ini

# Utilisateur par défaut pour les connexions SSH
remote_user = root

# Activer la sortie enrichie avec couleurs
force_color = True

# Afficher les tâches skipped
display_skipped_hosts = True

# Afficher les hosts non trouvés
display_errors_fatal = False

# Nombre de tâches parallèles
forks = 5

# Timeout de connexion SSH (secondes)
timeout = 30

# Format d'affichage des résultats
stdout_callback = yaml

# Activer les logs détaillés
#log_path = ./logs/ansible.log

# Répertoire pour les rôles Ansible (utile pour rôles complexes)
#roles_path = ./roles

# Activer la validation des templates Jinja2
#jinja2_extensions = jinja2.ext.do

# ====================================================================
# SÉCURITÉ
# ====================================================================

# Activer le contrôle d'accès basé sur les rôles (RBAC)
#access_rules_enabled = True

# Chemin vers le fichier Vault password
vault_password_file = .vault-password

# Identifier les fichiers Vault
vault_identity_list = default@.vault-password

# ====================================================================
# COMPORTEMENT
# ====================================================================

# Arrêter l'exécution si une tâche échoue
any_errors_fatal = False

# Rassembler les faits (facts) sur les hôtes
gathering = smart

# Cache des facts pour optimiser les performances
#fact_caching = jsonfile
#fact_caching_connection = ./facts_cache
#fact_caching_timeout = 86400

# Vérifier les changements sans les appliquer (mode dry-run)
# Décommenter pour tester les playbooks
#check_mode = False

# Afficher les différences avant/après les changements
#diff = True

# ====================================================================
# CONTRÔLE D'HÔTE
# ====================================================================

# Ne pas demander confirmation de clé SSH
host_key_checking = False

# Activer la persistance de connexion SSH
pipelining = True

# ====================================================================
# MODULES PAR DÉFAUT
# ====================================================================

# Module de copie de fichiers par défaut
#copy_module_compat = True

# ====================================================================
# DÉBOGAGE
# ====================================================================

# Affichage du verbosity par défaut
# 0 = normal, 1 = verbose (-v), 2 = very verbose (-vv), etc.
#verbosity = 0

# Afficher les avertissements
deprecation_warnings = True

# ====================================================================
# SSH
# ====================================================================

[ssh_connection]

# Retries SSH en cas de perte de connexion
retries = 3

# Utiliser OpenSSH (plus performant)
ssh_executable = /usr/bin/ssh

# Authentification par clé SSH uniquement
#ssh_args = -C -o ControlMaster=auto -o ControlPersist=60s -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no

# ====================================================================
# PLUGINS
# ====================================================================

[plugin:vars]

# Plugins de variables (optionnel)
# vars_plugins_enabled = auto,native

[plugin:callback]

# Callbacks pour l'affichage (optionnel)
# callback_plugins_enabled = auto,native